- name: Generate ArgoCD application for {{ component_name }}
  delegate_to: localhost
  vars:
    name: '{{ component_name }}'
    namespace: '{{ component_namespace }}'
    repo: '{{ argocd.git.repo }}'
    path: '{{ vendor_dir }}/{{ component_name }}'
  template:
    src: application.yml.j2
    dest: '{{ playbook_dir }}/{{ applications_dir }}/{{ component_name }}.yml'
