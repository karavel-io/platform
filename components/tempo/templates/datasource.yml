apiVersion: integreatly.org/v1alpha1
kind: GrafanaDataSource
metadata:
  name: {{ include "tempo.name" . }}-datasource
  namespace: {{ .Values.grafana.namespace | default .Release.Namespace }}
  labels:
    app.kubernetes.io/name: tempo
    grafana.integreatly.org/instance: grafana-operated
    {{- include "tempo.labels" . | nindent 4 }}
spec:
  name: tempo.yaml
  datasources:
    - name: {{ title (include "tempo.name" . ) }}
      type: tempo
      uid: {{ include "tempo.name" . }}
      access: proxy
      url: http://{{ include "tempo.name" . }}-query.{{ .Release.Namespace }}:16686
      version: 1
      editable: false
